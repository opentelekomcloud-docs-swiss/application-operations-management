:original_name: ListAlarmThresholdRules.html

.. _ListAlarmThresholdRules:

Querying the Threshold Rule List
================================

Function
--------

This API is used to query the threshold rule list.

URI
---

GET /v1/{project_id}/ams/alarms

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+-------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                   |
   +============+===========+========+===============================================================================+
   | project_id | Yes       | String | Project ID obtained from IAM. Generally, a project ID contains 32 characters. |
   +------------+-----------+--------+-------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------+-----------+---------+-----------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type    | Description                                                                       |
   +===========+===========+=========+===================================================================================+
   | limit     | No        | Integer | Value range: 1-1000. Default value: 1000. Number of records that can be returned. |
   +-----------+-----------+---------+-----------------------------------------------------------------------------------+
   | start     | No        | Long    | Pagination information.                                                           |
   +-----------+-----------+---------+-----------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                              |
   +=================+=================+=================+==========================================+
   | X-Auth-Token    | Yes             | String          | Project-level token obtained from IAM.   |
   +-----------------+-----------------+-----------------+------------------------------------------+
   | Content-Type    | Yes             | String          | Content type, which is application/json. |
   |                 |                 |                 |                                          |
   |                 |                 |                 | Enumeration values:                      |
   |                 |                 |                 |                                          |
   |                 |                 |                 | -  **application/json**                  |
   +-----------------+-----------------+-----------------+------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +--------------+---------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | Parameter    | Type                                                                                                          | Description                                 |
   +==============+===============================================================================================================+=============================================+
   | errorCode    | String                                                                                                        | Response code.                              |
   +--------------+---------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | errorMessage | String                                                                                                        | Response message.                           |
   +--------------+---------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | metaData     | :ref:`MetaData <listalarmthresholdrules__response_metadata>` object                                           | Metadata, including pagination information. |
   +--------------+---------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | thresholds   | Array of :ref:`AlarmAPIQueryAlarmResult <listalarmthresholdrules__response_alarmapiqueryalarmresult>` objects | Threshold rule list.                        |
   +--------------+---------------------------------------------------------------------------------------------------------------+---------------------------------------------+

.. _listalarmthresholdrules__response_metadata:

.. table:: **Table 5** MetaData

   +-----------+---------+---------------------------------------------------------------------------+
   | Parameter | Type    | Description                                                               |
   +===========+=========+===========================================================================+
   | count     | Integer | Number of records that can be returned.                                   |
   +-----------+---------+---------------------------------------------------------------------------+
   | start     | String  | Start of the next page, which is used for pagination. null: No more data. |
   +-----------+---------+---------------------------------------------------------------------------+
   | total     | Integer | Total number of records.                                                  |
   +-----------+---------+---------------------------------------------------------------------------+

.. _listalarmthresholdrules__response_alarmapiqueryalarmresult:

.. table:: **Table 6** AlarmAPIQueryAlarmResult

   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | Parameter               | Type                                                                            | Description                                      |
   +=========================+=================================================================================+==================================================+
   | idTurnOn                | Boolean                                                                         | Whether to enable the threshold rule.            |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | type                    | String                                                                          | Threshold rule type.                             |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | policyName              | String                                                                          | Threshold rule template name.                    |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | alarmName               | String                                                                          | Threshold rule name.                             |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | id                      | String                                                                          | Threshold rule ID.                               |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | alarmDescription        | String                                                                          | Threshold rule description.                      |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | actionEnabled           | Boolean                                                                         | Whether to enable notification.                  |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | okActions               | Array of strings                                                                | Action to be taken when restoration is complete. |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | alarmActions            | Array of strings                                                                | Action to be taken when an alarm is reported.    |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | insufficientDataActions | Array of strings                                                                | Action to be taken when data is insufficient.    |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | stateValue              | String                                                                          | Service status.                                  |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | stateReason             | String                                                                          | Cause description.                               |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | stateUpdatedTimestamp   | String                                                                          | Time when the status was updated.                |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | metricName              | String                                                                          | Time series name.                                |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | namespace               | String                                                                          | Namespace of time series objects.                |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | statistic               | String                                                                          | Statistic.                                       |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | dimensions              | Array of :ref:`Dimension <listalarmthresholdrules__response_dimension>` objects | List of time series dimensions.                  |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | resources               | Array of strings                                                                | Resource information (discarded).                |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | period                  | Integer                                                                         | Statistical period.                              |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | evaluationPeriods       | Integer                                                                         | Number of consecutive periods.                   |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | unit                    | String                                                                          | Threshold unit.                                  |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | threshold               | String                                                                          | Threshold value.                                 |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | comparisonOperator      | String                                                                          | Comparison operator.                             |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | alarmAdvice             | String                                                                          | Alarm clearance suggestion.                      |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+
   | alarmLevel              | String                                                                          | Alarm severity.                                  |
   +-------------------------+---------------------------------------------------------------------------------+--------------------------------------------------+

.. _listalarmthresholdrules__response_dimension:

.. table:: **Table 7** Dimension

   ========= ====== ================
   Parameter Type   Description
   ========= ====== ================
   name      String Dimension name.
   value     String Dimension value.
   ========= ====== ================

Example Requests
----------------

Query the threshold rule list.

.. code-block:: text

   GET https://{Endpoint}/v1/{project_id}/ams/alarms

Example Responses
-----------------

**Status code: 200**

OK

The request is successful.

.. code-block::

   {
     "errorCode" : "SVCSTG_AMS_2000000",
     "errorMessage" : "success",
     "metaData" : {
       "count" : 10,
       "start" : null,
       "total" : 100
     },
     "thresholds" : [ {
       "id" : "2137",
       "alarmName" : "Mon_host",
       "alarmDescription" : "",
       "actionEnabled" : false,
       "okActions" : [ ],
       "alarmActions" : [ ],
       "insufficientDataActions" : [ ],
       "stateValue" : "alarm",
       "stateReason" : "",
       "stateUpdatedTimestamp" : null,
       "metricName" : "cpuCoreLimit",
       "namespace" : "PAAS.CONTAINER",
       "statistic" : "average",
       "dimensions" : [ {
         "name" : "appName",
         "value" : "rhm-broker"
       } ],
       "period" : 60000,
       "evaluationPeriods" : 1,
       "unit" : "Core",
       "threshold" : "0",
       "comparisonOperator" : ">=",
       "alarmAdvice" : "",
       "alarmLevel" : 3
     } ]
   }

Status Codes
------------

+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Status Code                       | Description                                                                                                                                                                                       |
+===================================+===================================================================================================================================================================================================+
| 200                               | OK                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                   |
|                                   | The request is successful.                                                                                                                                                                        |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 400                               | Bad Request                                                                                                                                                                                       |
|                                   |                                                                                                                                                                                                   |
|                                   | Invalid request. The client should not repeat the request without modifications.                                                                                                                  |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 401                               | Unauthorized                                                                                                                                                                                      |
|                                   |                                                                                                                                                                                                   |
|                                   | The authorization information is incorrect or invalid.                                                                                                                                            |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 403                               | ForbiddenThe request is rejected. The server has received the request and understood it, but the server refuses to respond to it. The client should not repeat the request without modifications. |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 500                               | Internal Server Error                                                                                                                                                                             |
|                                   |                                                                                                                                                                                                   |
|                                   | The server is able to receive the request but unable to understand the request.                                                                                                                   |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 503                               | Service Unavailable                                                                                                                                                                               |
|                                   |                                                                                                                                                                                                   |
|                                   | The requested service is invalid. The client should not repeat the request without modifications.                                                                                                 |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
